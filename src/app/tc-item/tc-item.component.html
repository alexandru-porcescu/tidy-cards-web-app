<div class="collection-item" [class.is-caption]="item.type == itemTypes.TEXT.id" *ngIf="item._id">

  <tc-item-url *ngIf="item.type == itemTypes.URL.id" [item]="item"></tc-item-url>
  <tc-item-image *ngIf="item.type == itemTypes.IMAGE.id" [item]="item"></tc-item-image>
  <tc-item-youtube *ngIf="item.type == itemTypes.YOUTUBE.id" [item]="item"></tc-item-youtube>
  <tc-item-tweet *ngIf="item.type == itemTypes.TWEET.id" [item]="item"></tc-item-tweet>
  <tc-item-text *ngIf="item.type == itemTypes.TEXT.id" [item]="item"></tc-item-text>
  <tc-collection-card *ngIf="item.type == itemTypes.COLLECTION.id" [collection]="item._content"></tc-collection-card>

  <markdown class="collection-item--footer-caption" [data]="item.description" *ngIf="item.description && item.type != itemTypes.TEXT.id"></markdown>

  <ul class="collection-item--actions" *ngIf="isAuthor">
    <li class="collection-item--action">
      <div class="collection-item--display-modes" *ngIf="availableDisplayModes.length > 0">
        <a href="javascript:void(0)" class="collection-item--display-mode" [class.is-active]="item.displayMode == 'SMALL'" (click)="updateItemDisplayMode('SMALL')" *ngIf="availableDisplayModes.includes('SMALL')">S</a>
        <a href="javascript:void(0)" class="collection-item--display-mode" [class.is-active]="item.displayMode == 'MEDIUM'" (click)="updateItemDisplayMode('MEDIUM')" *ngIf="availableDisplayModes.includes('MEDIUM')">M</a>
        <a href="javascript:void(0)" class="collection-item--display-mode" [class.is-active]="item.displayMode == 'LARGE'" (click)="updateItemDisplayMode('LARGE')" *ngIf="availableDisplayModes.includes('LARGE')">L</a>
      </div>
    </li>
    <li class="collection-item--action">
      <a href="javascript:void(0)" class="btn btn-secondary btn-icon btn-icon-narrow btn-sm" [class.card-collection--drag-handle]="isAuthor" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span class="icon">{{ t._.icon.more?.filled }}</span>
      </a>
      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
        <a href="javascript:void(0)" class="dropdown-item" (click)="openUpdateModal('lg')">{{t._.action?.edit}}</a>
        <a href="javascript:void(0)" class="dropdown-item" (click)="openDeleteItemModal(itemDeleteModal)">{{t._.action?.delete}}</a>
      </div>
    </li>
  </ul>

</div>

<!-- <span class="date" [attr.title]="item.createdAt | date:'EEEE, LLLL dd, y h:mm a'">{{item.createdAt | date}}</span> -->

<ng-template #updateItemModal let-c="close" let-d="dismiss">
    <tc-item-create [item]=item (newItem)="onItemUpdated($event);" (updateCanceled)="onItemUpdatedCanceled($event)"></tc-item-create>
</ng-template>

<ng-template #updateColletionModal let-c="close" let-d="dismiss">
    <tc-collection-create [inputCollection]="item._content" (newCollection)="onSubCollectionUpdated($event);" (updateCanceled)="onItemUpdatedCanceled($event)"></tc-collection-create>
</ng-template>

<ng-template class="default-modal" #itemDeleteModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h5 class="modal-title">{{t._.item?.delete_title}}</h5>
  </div>
  <div class="modal-body">
    {{t._.item?.delete_caption}}
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="c('cancel')">{{t._.action?.cancel}}</button>
    <button type="button" class="btn btn-danger" (click)="c('confirm')">{{t._.item?.delete_button_yes}}</button>
  </div>
</ng-template>
